<main>

<div class="album py-5 bg-body-tertiary">
    <div class="container">

        <h1><%= title %></h1>

<div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">

<table class="table">
<thead>
    <tr>
        <th scope="col">Bid No.</th>
        <th scope="col">Auctioned Item</th>
        <th scope="col">Bid Amount</th>
        <th scope="col">Note</th>
        <th scope="col">Created</th>
        <th scope="col">Updated</th>
        <th scope="col">Action(s)</th>
    </tr>
</thead>

<% let x=1; bids.forEach(bid => { %>
        <tr>
        <td><%= x %>. </td>
        <td><a href="!">Auction Item</a></td>
        <td><%= bid.amount %></td>
        <td><%= bid.note %></td>
        <td><%= dayjs(bid.createdAt).format('DD/MM/YYYY') %></td>
        <td>Updated <%= dayjs(bid.updatedAt).fromNow(true) %> ago</td>
        <td>
        <a class="btn btn-sm btn-warning" href="/bid/edit?id=<%= bid._id %>"><i class="bi-pencil-fill"></i></a> <button type="button" class="btn btn-sm btn-danger" data-bs-toggle="modal" data-bs-target="#D<%= x %>">
            <i class="bi-trash3-fill"></i></button>

<div class="modal fade" id="D<%= x %>" tabindex="-1" aria-labelledby="exampleModalLabel<%= x %>" aria-hidden="true">
<div class="modal-dialog">
    <div class="modal-content">
    <div class="modal-header">
        <h1 class="modal-title fs-3 text-danger" id="exampleModalLabel<%= x %>">Are you sure you want to delete your Bid?</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
    </div>
    <div class="modal-body">
        Auction: [Auction / Item Name] 
        Amount: <%= bid.amount %></td>
    </div>
    <div class="modal-footer">
    <form method="POST" action="/bid/delete?id=<%= bid._id %>">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="submit" class="btn btn-danger">Delete</button>
    </form>
    </div>
    </div>
</div>
</div>                

        </td>

        </tr>
<% x++; }); %>

</table>

</div>

</div>
</div>

</main>